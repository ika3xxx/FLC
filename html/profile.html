<html lang="vi">
<head>
  <meta charset="utf-8" />
  <meta content="width=device-width, initial-scale=1" name="viewport" />
  <title>FreeHub - Hồ sơ người dùng</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link
    href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css"
    rel="stylesheet"
  />
  <link
    href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap"
    rel="stylesheet"
  />
  <style>
    body {
      font-family: "Inter", sans-serif;
      background: linear-gradient(135deg, #e0e7ff 0%, #f0f4ff 100%);
    }
    main::-webkit-scrollbar {
      width: 8px;
    }
    main::-webkit-scrollbar-track {
      background: #f0f4ff;
    }
    main::-webkit-scrollbar-thumb {
      background-color: #6366f1;
      border-radius: 10px;
      border: 2px solid #f0f4ff;
    }
    /* Dropdown below button */
    #profile-dropdown-menu {
      top: 100%;
      margin-top: 0.5rem;
      transform-origin: top center;
      min-width: 12rem;
    }
  </style>
</head>
<body class="min-h-screen flex flex-col bg-indigo-50">
  <!-- Header -->
  <header class="bg-white shadow sticky top-0 z-50">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
      <div class="flex justify-between h-16 items-center relative">
        <a class="flex items-center space-x-2" href="#">
          <img
            alt="Logo FreeHub, chữ FH cách điệu màu xanh dương và trắng"
            class="h-10 w-10 rounded-md"
            height="40"
            src="https://storage.googleapis.com/a1aa/image/e8bb47a6-7031-4d6e-40d9-f0c336723fe4.jpg"
            width="40"
          />
          <span class="text-indigo-600 font-bold text-xl select-none">
            FreeHub
          </span>
        </a>
        <nav class="hidden md:flex space-x-8 font-semibold text-gray-700">
          <a class="hover:text-indigo-600 transition" href="../index.html">
            Trang chủ
          </a>
          <a class="hover:text-indigo-600 transition" href="./viec-lam.html">
            Việc làm
          </a>
          <a class="hover:text-indigo-600 transition" href="./freelancer.html">
            Freelancer
          </a>
          <a class="hover:text-indigo-600 transition" href="./dang-du-an.html">
            Đăng dự án
          </a>
        </nav>
        <div class="hidden md:flex justify-end flex-1 max-w-xs" id="auth-buttons">
          <div class="relative w-full">
            <button id="profile-dropdown-button" aria-haspopup="true" aria-expanded="false" class="flex items-center space-x-3 w-full justify-center focus:outline-none focus:ring-2 focus:ring-indigo-600 rounded-md hover:ring-indigo-600 transition" type="button">
              <img
                id="header-avatar"
                alt="Ảnh đại diện người dùng"
                src="https://storage.googleapis.com/a1aa/image/80314c24-2a8d-41aa-9e23-a77f15e64bd6.jpg"
                class="w-10 h-10 rounded-full object-cover shadow-md"
                width="40"
                height="40"
              />
              <span class="text-indigo-600 font-semibold text-lg select-none" id="header-username">Nguyễn Văn A</span>
              <i class="fas fa-chevron-down text-indigo-600"></i>
            </button>
            <div id="profile-dropdown-menu" class="hidden absolute left-0 right-0 bg-white rounded-md shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none z-50" role="menu" aria-orientation="vertical" aria-labelledby="profile-dropdown-button" tabindex="-1">
              <a href="./profile.html" class="block px-4 py-3 text-indigo-700 font-semibold hover:bg-indigo-100 transition rounded-t-md flex items-center space-x-2" role="menuitem" tabindex="0">
                <i class="fas fa-user"></i>
                <span>Xem hồ sơ</span>
              </a>
              <button id="logout-button" class="w-full text-left px-4 py-3 text-red-600 font-semibold hover:bg-red-100 transition rounded-b-md flex items-center space-x-2 focus:outline-none" type="button" role="menuitem" tabindex="0">
                <i class="fas fa-sign-out-alt"></i>
                <span>Đăng xuất</span>
              </button>
            </div>
          </div>
        </div>
        <button aria-label="Mở menu" class="md:hidden text-indigo-600 hover:text-indigo-800 focus:outline-none focus:ring-2 focus:ring-indigo-600" id="mobile-menu-button" type="button">
          <i class="fas fa-bars fa-lg"></i>
        </button>
      </div>
    </div>
    <!-- Mobile menu -->
    <nav aria-label="Menu di động" class="md:hidden bg-white border-t border-indigo-100 hidden" id="mobile-menu">
      <a class="block px-4 py-3 text-indigo-700 font-semibold border-b border-indigo-100 hover:bg-indigo-50 flex items-center space-x-2" href="#">
        <i class="fas fa-home"></i>
        <span>Trang chủ</span>
      </a>
      <a class="block px-4 py-3 text-indigo-700 font-semibold border-b border-indigo-100 hover:bg-indigo-50 flex items-center space-x-2" href="html/viec-lam.html">
        <i class="fas fa-briefcase"></i>
        <span>Việc làm</span>
      </a>
      <a class="block px-4 py-3 text-indigo-700 font-semibold border-b border-indigo-100 hover:bg-indigo-50 flex items-center space-x-2" href="html/freelancer.html">
        <i class="fas fa-user-friends"></i>
        <span>Freelancer</span>
      </a>
      <a class="block px-4 py-3 text-indigo-700 font-semibold border-b border-indigo-100 hover:bg-indigo-50 flex items-center space-x-2" href="html/dang-du-an.html">
        <i class="fas fa-plus-circle"></i>
        <span>Đăng dự án</span>
      </a>
      <a href="html/profile.html" class="block px-4 py-3 text-indigo-700 font-semibold border-b border-indigo-100 hover:bg-indigo-50 flex items-center space-x-2">
        <i class="fas fa-user"></i>
        <span>Hồ sơ</span>
      </a>
      <button id="mobile-logout-button" class="w-full text-left px-4 py-3 text-red-600 font-semibold hover:bg-red-100 flex items-center space-x-2 focus:outline-none" type="button">
        <i class="fas fa-sign-out-alt"></i>
        <span>Đăng xuất</span>
      </button>
    </nav>
  </header>

  <!-- Profile Content -->
  <main class="flex-grow max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-10 bg-white rounded-lg shadow-md mt-10 mb-20">
    <section class="flex flex-col sm:flex-row gap-10">
      <!-- Left panel -->
      <aside class="sm:w-1/3 flex flex-col items-center text-center bg-indigo-50 rounded-lg p-8 shadow-inner">
        <div class="relative w-36 h-36 rounded-full overflow-hidden shadow-lg ring-4 ring-indigo-300">
          <img
            alt="Ảnh đại diện người dùng, khuôn mặt cười, tóc đen ngắn, mặc áo sơ mi xanh dương"
            src="https://storage.googleapis.com/a1aa/image/80314c24-2a8d-41aa-9e23-a77f15e64bd6.jpg"
            class="object-cover w-full h-full"
            width="144"
            height="144"
            id="profile-avatar"
          />
          <div
            id="avatar-preview-overlay"
            class="absolute inset-0 bg-indigo-700 bg-opacity-60 flex items-center justify-center opacity-0 hover:opacity-100 transition-opacity cursor-pointer rounded-full text-white text-sm font-semibold"
            title="Nhấp để thay đổi ảnh đại diện"
          >
            Thay đổi ảnh
          </div>
        </div>
        <h1 class="mt-6 text-3xl font-bold text-indigo-800 tracking-wide" id="profile-name">
          Nguyễn Văn A
        </h1>
        <p class="mt-2 text-indigo-600 font-semibold text-xl" id="profile-title">
          Lập trình viên React.js
        </p>
        <div id="skills-container" class="flex flex-wrap justify-center gap-3 mt-4 max-w-xs">
          <span class="bg-indigo-200 text-indigo-700 text-sm font-semibold px-3 py-1 rounded-full shadow-sm">React.js</span>
          <span class="bg-indigo-200 text-indigo-700 text-sm font-semibold px-3 py-1 rounded-full shadow-sm">JavaScript</span>
          <span class="bg-indigo-200 text-indigo-700 text-sm font-semibold px-3 py-1 rounded-full shadow-sm">Frontend</span>
        </div>
        <div class="flex items-center space-x-2 text-yellow-400 mt-5 mb-2 text-xl select-none" aria-label="Đánh giá sao">
          <i class="fas fa-star"></i>
          <i class="fas fa-star"></i>
          <i class="fas fa-star"></i>
          <i class="fas fa-star"></i>
          <i class="fas fa-star-half-alt"></i>
          <span class="text-gray-600 text-base font-semibold">(4.7)</span>
        </div>
        <p class="text-indigo-600 font-semibold text-lg" id="profile-rate">$25 / giờ</p>
      </aside>

      <!-- Right panel -->
      <section class="sm:w-2/3">
        <h2 class="text-2xl font-bold text-indigo-700 mb-6 border-b border-indigo-300 pb-2">
          Thông tin cá nhân
        </h2>
        <form id="profile-form" class="space-y-6 max-w-xl" autocomplete="off">
          <div>
            <label for="full-name" class="block text-gray-700 font-semibold mb-1">Họ và tên</label>
            <input type="text" id="full-name" name="fullName" required value="Nguyễn Văn A" class="w-full border border-gray-300 rounded-md px-4 py-2 focus:outline-none focus:ring-2 focus:ring-indigo-600 focus:border-indigo-600" />
          </div>
          <div>
            <label for="email" class="block text-gray-700 font-semibold mb-1">Email</label>
            <input type="email" id="email" name="email" required value="nguyenvana@example.com" class="w-full border border-gray-300 rounded-md px-4 py-2 focus:outline-none focus:ring-2 focus:ring-indigo-600 focus:border-indigo-600" />
          </div>
          <div>
            <label for="phone" class="block text-gray-700 font-semibold mb-1">Số điện thoại</label>
            <input type="tel" id="phone" name="phone" value="+84 123 456 789" class="w-full border border-gray-300 rounded-md px-4 py-2 focus:outline-none focus:ring-2 focus:ring-indigo-600 focus:border-indigo-600" />
          </div>
          <div>
            <label for="hourly-rate" class="block text-gray-700 font-semibold mb-1">Giá / giờ (USD)</label>
            <input type="number" id="hourly-rate" name="hourlyRate" min="0" step="0.01" value="25" class="w-full border border-gray-300 rounded-md px-4 py-2 focus:outline-none focus:ring-2 focus:ring-indigo-600 focus:border-indigo-600" />
          </div>
          <div>
            <label for="skills" class="block text-gray-700 font-semibold mb-1">Kỹ năng (phân cách bằng dấu phẩy)</label>
            <input type="text" id="skills" name="skills" value="React.js, JavaScript, Frontend" class="w-full border border-gray-300 rounded-md px-4 py-2 focus:outline-none focus:ring-2 focus:ring-indigo-600 focus:border-indigo-600" />
          </div>
          <div>
            <label for="bio" class="block text-gray-700 font-semibold mb-1">Giới thiệu bản thân</label>
            <textarea id="bio" name="bio" rows="4" class="w-full border border-gray-300 rounded-md px-4 py-2 focus:outline-none focus:ring-2 focus:ring-indigo-600 focus:border-indigo-600 resize-none">Lập trình viên React.js với 5 năm kinh nghiệm phát triển ứng dụng web, đam mê công nghệ và sáng tạo.</textarea>
          </div>
          <div>
            <label for="avatar" class="block text-gray-700 font-semibold mb-1">Ảnh đại diện</label>
            <input type="file" id="avatar" name="avatar" accept="image/*" class="w-full text-gray-700" />
          </div>
          <div class="flex justify-end space-x-4">
            <button type="reset" class="bg-gray-300 hover:bg-gray-400 text-gray-800 font-semibold rounded-md px-6 py-2 focus:outline-none focus:ring-2 focus:ring-gray-400">Hủy</button>
            <button type="submit" class="bg-indigo-600 hover:bg-indigo-700 text-white font-semibold rounded-md px-6 py-2 focus:outline-none focus:ring-2 focus:ring-indigo-600">Lưu thay đổi</button>
          </div>
        </form>
      </section>
    </section>
  </main>

  <script>
    const mobileMenuButton = document.getElementById("mobile-menu-button");
    const mobileMenu = document.getElementById("mobile-menu");
    const profileDropdownButton = document.getElementById("profile-dropdown-button");
    const profileDropdownMenu = document.getElementById("profile-dropdown-menu");
    const logoutButton = document.getElementById("logout-button");
    const mobileLogoutButton = document.getElementById("mobile-logout-button");

    mobileMenuButton.addEventListener("click", () => {
      mobileMenu.classList.toggle("hidden");
    });

    // Toggle dropdown menu below button
    profileDropdownButton.addEventListener("click", () => {
      const expanded = profileDropdownButton.getAttribute("aria-expanded") === "true";
      if (expanded) {
        profileDropdownMenu.classList.add("hidden");
        profileDropdownButton.setAttribute("aria-expanded", "false");
      } else {
        profileDropdownMenu.classList.remove("hidden");
        profileDropdownButton.setAttribute("aria-expanded", "true");
      }
    });

    // Close dropdown if clicked outside
    document.addEventListener("click", (e) => {
      if (
        !profileDropdownButton.contains(e.target) &&
        !profileDropdownMenu.contains(e.target)
      ) {
        profileDropdownMenu.classList.add("hidden");
        profileDropdownButton.setAttribute("aria-expanded", "false");
      }
    });

    // Logout handler
    function logout() {
      if (confirm("Bạn có chắc muốn đăng xuất?")) {
        alert("Đăng xuất thành công!");
        window.location.href = "index.html";
      }
    }

    logoutButton.addEventListener("click", () => {
      profileDropdownMenu.classList.add("hidden");
      profileDropdownButton.setAttribute("aria-expanded", "false");
      logout();
    });

    mobileLogoutButton.addEventListener("click", () => {
      mobileMenu.classList.add("hidden");
      logout();
    });

    // Profile form submit handler
    const profileForm = document.getElementById("profile-form");
    const skillsInput = document.getElementById("skills");
    const skillsContainer = document.getElementById("skills-container");
    const profileName = document.getElementById("profile-name");
    const profileRate = document.getElementById("profile-rate");
    const headerName = document.querySelector("#auth-buttons a span");
    const profileAvatar = document.getElementById("profile-avatar");
    const headerAvatar = document.querySelector("#auth-buttons a img");

    profileForm.addEventListener("submit", (e) => {
      e.preventDefault();

      // Cập nhật kỹ năng bên trái
      const skills = skillsInput.value
        .split(",")
        .map(s => s.trim())
        .filter(s => s.length > 0);

      skillsContainer.innerHTML = "";
      skills.forEach(skill => {
        const span = document.createElement("span");
        span.className = "bg-indigo-200 text-indigo-700 text-sm font-semibold px-3 py-1 rounded-full shadow-sm";
        span.textContent = skill;
        skillsContainer.appendChild(span);
      });

      // Cập nhật tên và giá giờ
      const fullName = profileForm.fullName.value.trim();
      const hourlyRate = profileForm.hourlyRate.value.trim();

      profileName.textContent = fullName || "Người dùng";
      headerName.textContent = fullName || "Người dùng";

      profileRate.textContent = hourlyRate ? `$${hourlyRate} / giờ` : "";

      alert("Thông tin hồ sơ đã được lưu thành công!");
    });

    // Thay đổi ảnh đại diện
    const avatarInput = document.getElementById("avatar");
    const avatarPreviewOverlay = document.createElement("div");
    avatarPreviewOverlay.className = "absolute inset-0 bg-indigo-700 bg-opacity-60 flex items-center justify-center opacity-0 hover:opacity-100 transition-opacity cursor-pointer rounded-full text-white text-sm font-semibold";
    avatarPreviewOverlay.textContent = "Thay đổi ảnh";
    avatarPreviewOverlay.title = "Nhấp để thay đổi ảnh đại diện";

    const avatarContainer = profileAvatar.parentElement;
    avatarContainer.style.position = "relative";
    avatarContainer.appendChild(avatarPreviewOverlay);

    avatarPreviewOverlay.addEventListener("click", () => {
      avatarInput.click();
    });

    avatarInput.addEventListener("change", (e) => {
      const file = e.target.files[0];
      if (file) {
        const reader = new FileReader();
        reader.onload = (ev) => {
          profileAvatar.src = ev.target.result;
          headerAvatar.src = ev.target.result;
        };
        reader.readAsDataURL(file);
      }
    });
  </script>
</body>
</html>